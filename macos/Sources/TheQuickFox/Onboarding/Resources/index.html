<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TheQuickFox Onboarding</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="onboarding-container">
        <div class="carousel-wrapper">
            <div class="carousel" id="carousel">
                <!-- Panel 1: Instant Hook - Show the Magic -->
                <div class="panel active" data-panel="1">
                    <div class="panel-content centered">
                        <h1>Write less. Say more.</h1>
                        <p class="subtitle">TheQuickFox turns your rough thoughts into polished messages.</p>

                        <div class="before-after">
                            <div class="before-box">
                                <span class="box-label">You type</span>
                                <p>"running late 10 min"</p>
                            </div>
                            <div class="arrow-icon">
                                <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
                                    <path d="M5 12H19M19 12L13 6M19 12L13 18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <div class="after-box">
                                <span class="box-label">TheQuickFox writes</span>
                                <p>"Hi! Just wanted to let you know I'm running about 10 minutes behind. I'll be there shortly - thanks for your patience!"</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Panel 2: Interactive Try It - The Win -->
                <div class="panel" data-panel="2">
                    <div class="panel-content">
                        <h1>Now you try</h1>
                        <p class="subtitle">Type something rough. Watch it transform.</p>

                        <div class="try-it-container">
                            <div class="input-section">
                                <label for="user-input">Your rough draft:</label>
                                <textarea id="user-input" placeholder="e.g. &quot;hey can we reschedule mtg tmrw?&quot;" rows="2"></textarea>
                            </div>

                            <div class="tone-selector">
                                <span class="tone-label">Tone:</span>
                                <div class="tone-chips">
                                    <button class="tone-chip active" data-tone="professional">Professional</button>
                                    <button class="tone-chip" data-tone="friendly">Friendly</button>
                                    <button class="tone-chip" data-tone="formal">Formal</button>
                                </div>
                            </div>

                            <button class="transform-btn" id="transform-btn" onclick="transformText()">
                                <span class="btn-text">Transform</span>
                                <span class="btn-loader" style="display: none;"></span>
                            </button>

                            <div class="output-section" id="output-section" style="display: none;">
                                <label>Polished result:</label>
                                <div class="output-text" id="output-text"></div>
                                <button class="copy-btn" onclick="copyResult()">Copy</button>
                            </div>
                        </div>

                        <p class="win-text" id="win-text" style="display: none;">That's it. You just saved 5 minutes of editing.</p>
                    </div>
                </div>

                <!-- Panel 3: Unlock Global Access -->
                <div class="panel" data-panel="3">
                    <div class="panel-content">
                        <div class="unlock-hero">
                            <div class="keyboard-demo">
                                <span class="key-visual large">
                                    <span class="key-symbol">^</span>
                                    <span class="key-text">control</span>
                                </span>
                                <span class="times-badge">x2</span>
                            </div>
                            <h1>Use it anywhere</h1>
                            <p class="subtitle">Double-press Control in any app to summon TheQuickFox.</p>
                        </div>

                        <div class="permission-card" id="accessibility-card">
                            <div class="permission-icon">
                                <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
                                    <path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke="currentColor" stroke-width="2"/>
                                    <path d="M2 12C2 12 5 5 12 5C19 5 22 12 22 12C22 12 19 19 12 19C5 19 2 12 2 12Z" stroke="currentColor" stroke-width="2"/>
                                </svg>
                            </div>
                            <div class="permission-info">
                                <h3>Accessibility Access</h3>
                                <p>Required to detect the double-Control shortcut globally</p>
                            </div>
                            <button class="permission-btn" id="accessibility-btn" onclick="grantPermission('accessibility')">Enable</button>
                        </div>

                                            </div>
                </div>

                <!-- Panel 4: Screen Context -->
                <div class="panel" data-panel="4">
                    <div class="panel-content">
                        <h1>Context-aware AI</h1>
                        <p class="subtitle">TheQuickFox can see your screen to give smarter answers.</p>

                        <div class="permission-demo-gif">
                            <img src="screen-permissions.gif" alt="How to enable screen recording">
                        </div>

                        <div class="permission-card" id="screen-card">
                            <div class="permission-icon">
                                <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
                                    <rect x="2" y="3" width="20" height="14" rx="2" stroke="currentColor" stroke-width="2"/>
                                    <path d="M8 21H16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                    <path d="M12 17V21" stroke="currentColor" stroke-width="2"/>
                                </svg>
                            </div>
                            <div class="permission-info">
                                <h3>Screen Recording</h3>
                                <p>Lets TheQuickFox see your active window for context</p>
                            </div>
                            <button class="permission-btn" id="screen-btn" onclick="grantPermission('screenRecording')">Enable</button>
                        </div>

                                            </div>
                </div>

                <!-- Panel 5: Final Setup -->
                <div class="panel" data-panel="5">
                    <div class="panel-content centered">
                        <!-- Pre-completion state -->
                        <div id="setup-state">
                            <div class="ready-icon">
                                <svg width="64" height="64" viewBox="0 0 24 24" fill="none">
                                    <path d="M9 12L11 14L15 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                                </svg>
                            </div>
                            <h1>Almost there</h1>
                            <p class="subtitle">One last thing to activate your free trial.</p>

                            <div class="email-form">
                                <input type="email" id="email-field" placeholder="your@email.com" oninput="updateEmailValidity()">
                            </div>

                            <div class="terms-row">
                                <input type="checkbox" id="terms-checkbox" onchange="updateTermsAcceptance()">
                                <label for="terms-checkbox">
                                    I agree to the <a href="#" onclick="openTermsOfService(event)">Terms of Service</a>
                                    and <a href="#" onclick="openPrivacyPolicy(event)">Privacy Policy</a>
                                </label>
                            </div>

                            <div class="trial-info">
                                <span class="trial-badge">FREE TRIAL</span>
                                <span class="trial-text">1 week free to try TheQuickFox</span>
                            </div>
                        </div>

                        <!-- Post-completion state -->
                        <div id="success-state" style="display: none;">
                            <div class="success-icon">
                                <svg width="80" height="80" viewBox="0 0 24 24" fill="none">
                                    <path d="M9 12L11 14L15 10" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                                </svg>
                            </div>
                            <h1>You're all set!</h1>
                            <p class="subtitle">TheQuickFox is ready to use.</p>

                            <div class="next-step">
                                <div class="keyboard-hint">
                                    <span class="key-visual">
                                        <span class="key-symbol">^</span>
                                        <span class="key-text">control</span>
                                    </span>
                                    <span class="times-badge">x2</span>
                                </div>
                                <p class="hint-text">Press Control twice in any app to summon TheQuickFox</p>
                            </div>

                            <button class="close-btn" onclick="closeOnboarding()">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="navigation">
            <button class="nav-button back-button" onclick="navigateBack()" style="visibility: hidden;">Back</button>
            <div class="progress-dots">
                <span class="dot active" data-panel="1"></span>
                <span class="dot" data-panel="2"></span>
                <span class="dot" data-panel="3"></span>
                <span class="dot" data-panel="4"></span>
                <span class="dot" data-panel="5"></span>
            </div>
            <div class="nav-right">
                <button class="nav-button skip-button" id="skip-btn" onclick="skipToPermissions()" style="display: none;">Skip</button>
                <button class="nav-button continue-button" id="continue-btn" onclick="navigateNext()">Try It</button>
            </div>
        </div>
    </div>

    <!-- Confetti Canvas -->
    <canvas id="confetti-canvas"></canvas>

    <script src="app.js"></script>
</body>
</html>
