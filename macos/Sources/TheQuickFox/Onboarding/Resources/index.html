<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TheQuickFox Onboarding</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="onboarding-container">
        <div class="carousel-wrapper">
            <div class="carousel" id="carousel">
                <!-- Panel 1: Instant Hook - Show the Magic -->
                <div class="panel active" data-panel="1">
                    <div class="panel-content centered">
                        <h1>Your Context-Aware AI Assistant</h1>
                        <p class="subtitle">Ask questions about what's on your screen. No copy-paste needed.</p>

                        <div class="use-cases">
                            <div class="use-case">
                                <span class="use-case-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                        <path d="M12 20H21M12 20V14M12 20L4 12L12 4L20 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </span>
                                <div class="use-case-text">
                                    <strong>Debug faster</strong>
                                    <span>Explain errors, suggest fixes</span>
                                </div>
                            </div>
                            <div class="use-case">
                                <span class="use-case-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                        <path d="M21 11.5C21 16.75 16.75 21 11.5 21C6.25 21 2 16.75 2 11.5C2 6.25 6.25 2 11.5 2" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                        <path d="M22 2L15 9M22 2V8M22 2H16" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </span>
                                <div class="use-case-text">
                                    <strong>Respond faster</strong>
                                    <span>Draft replies to emails, messages, comments</span>
                                </div>
                            </div>
                            <div class="use-case">
                                <span class="use-case-icon">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                                        <path d="M12 6.25278V19.2528M12 6.25278C10.8321 5.47686 9.24649 5 7.5 5C5.75351 5 4.16789 5.47686 3 6.25278V19.2528C4.16789 18.4769 5.75351 18 7.5 18C9.24649 18 10.8321 18.4769 12 19.2528M12 6.25278C13.1679 5.47686 14.7535 5 16.5 5C18.2465 5 19.8321 5.47686 21 6.25278V19.2528C19.8321 18.4769 18.2465 18 16.5 18C14.7535 18 13.1679 18.4769 12 19.2528" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                </span>
                                <div class="use-case-text">
                                    <strong>Learn faster</strong>
                                    <span>Clarify formulas, explain concepts</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Panel 2: Interactive Try It - The Win -->
                <div class="panel" data-panel="2">
                    <div class="panel-content">
                        <h1>Now you try</h1>
                        <p class="subtitle">Type something rough. Watch it transform.</p>

                        <div class="try-it-container">
                            <div class="input-section">
                                <label for="user-input">Your rough draft:</label>
                                <textarea id="user-input" placeholder="e.g. &quot;hey can we reschedule mtg tmrw?&quot;" rows="2"></textarea>
                            </div>

                            <div class="tone-selector">
                                <span class="tone-label">Tone:</span>
                                <div class="tone-chips">
                                    <button class="tone-chip active" data-tone="professional">Professional</button>
                                    <button class="tone-chip" data-tone="friendly">Friendly</button>
                                    <button class="tone-chip" data-tone="formal">Formal</button>
                                </div>
                            </div>

                            <button class="transform-btn" id="transform-btn" onclick="transformText()">
                                <span class="btn-text">Transform</span>
                                <span class="btn-loader" style="display: none;"></span>
                            </button>

                            <div class="output-section" id="output-section" style="display: none;">
                                <label>Polished result:</label>
                                <div class="output-text" id="output-text"></div>
                                <button class="copy-btn" onclick="copyResult()">Copy</button>
                            </div>
                        </div>

                        <p class="win-text" id="win-text" style="display: none;">That's it. You just saved 5 minutes of editing.</p>
                    </div>
                </div>

                <!-- Panel 3: Unlock Global Access -->
                <div class="panel" data-panel="3">
                    <div class="panel-content centered">
                        <h1>Enable Accessibility</h1>
                        <p class="subtitle">Required for shortcut to work on any app.</p>

                        <div class="permission-card" id="accessibility-card">
                            <div class="permission-icon">
                                <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
                                    <path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke="currentColor" stroke-width="2"/>
                                    <path d="M2 12C2 12 5 5 12 5C19 5 22 12 22 12C22 12 19 19 12 19C5 19 2 12 2 12Z" stroke="currentColor" stroke-width="2"/>
                                </svg>
                            </div>
                            <div class="permission-info">
                                <h3>Accessibility Access</h3>
                                <p>Click Enable, then toggle on TheQuickFox</p>
                            </div>
                            <button class="permission-btn" id="accessibility-btn" onclick="grantPermission('accessibility')">Enable</button>
                        </div>

                        <div class="permission-demo-video">
                            <video autoplay loop muted playsinline>
                                <source src="accessibility-permissions.mp4" type="video/mp4">
                            </video>
                        </div>
                        <p class="video-caption">Find "TheQuickFox" and toggle it on</p>
                    </div>
                </div>

                <!-- Panel 4: Email/TOS -->
                <div class="panel" data-panel="4">
                    <div class="panel-content centered">
                        <div class="ready-icon">
                            <svg width="64" height="64" viewBox="0 0 24 24" fill="none">
                                <path d="M9 12L11 14L15 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                            </svg>
                        </div>
                        <h1>Almost there</h1>
                        <p class="subtitle">One last thing to activate your free trial.</p>

                        <div class="email-form">
                            <input type="email" id="email-field" placeholder="your@email.com" oninput="updateEmailValidity()">
                        </div>

                        <div class="terms-row">
                            <input type="checkbox" id="terms-checkbox" onchange="updateTermsAcceptance()">
                            <label for="terms-checkbox">
                                I agree to the <a href="#" onclick="openTermsOfService(event)">Terms of Service</a>
                                and <a href="#" onclick="openPrivacyPolicy(event)">Privacy Policy</a>
                            </label>
                        </div>

                        <div class="trial-info">
                            <span class="trial-badge">FREE TRIAL</span>
                            <span class="trial-text">1 week free to try TheQuickFox</span>
                        </div>
                    </div>
                </div>

                <!-- Panel 5: Screen Recording + Success -->
                <div class="panel" data-panel="5">
                    <div class="panel-content centered">
                        <!-- Step 1: Explain screen recording -->
                        <div id="screen-explain-state">
                            <div class="feature-icon-large">
                                <svg width="48" height="48" viewBox="0 0 24 24" fill="none">
                                    <rect x="2" y="3" width="20" height="14" rx="2" stroke="currentColor" stroke-width="2"/>
                                    <path d="M8 21H16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                    <path d="M12 17V21" stroke="currentColor" stroke-width="2"/>
                                    <circle cx="12" cy="10" r="2" stroke="currentColor" stroke-width="2"/>
                                </svg>
                            </div>
                            <h1>One last step</h1>
                            <p class="subtitle">TheQuickFox needs screen access to see what you're working on and give context-aware responses.</p>

                            <button class="primary-btn" onclick="showScreenInstructions()">Enable Screen Recording</button>
                        </div>

                        <!-- Step 2: Show instructions video -->
                        <div id="screen-instructions-state" style="display: none;">
                            <h1>Grant access in System Settings</h1>
                            <p class="subtitle">Find TheQuickFox in the list and toggle it on.</p>

                            <div class="permission-demo-video">
                                <video autoplay loop muted playsinline>
                                    <source src="screen-recording-permissions.mp4" type="video/mp4">
                                </video>
                            </div>
                            <p class="video-caption">Toggle on "TheQuickFox" in Screen Recording settings</p>

                            <button class="primary-btn" onclick="triggerScreenPermission()">Open System Settings</button>
                        </div>

                        <!-- Step 3: Waiting for permission -->
                        <div id="screen-waiting-state" style="display: none;">
                            <h1>Waiting for permission...</h1>
                            <p class="subtitle">Toggle on TheQuickFox in System Settings, then return here.</p>

                            <div class="permission-card granted" id="screen-card">
                                <div class="permission-icon">
                                    <svg width="32" height="32" viewBox="0 0 24 24" fill="none">
                                        <rect x="2" y="3" width="20" height="14" rx="2" stroke="currentColor" stroke-width="2"/>
                                        <path d="M8 21H16" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                        <path d="M12 17V21" stroke="currentColor" stroke-width="2"/>
                                    </svg>
                                </div>
                                <div class="permission-info">
                                    <h3>Screen Recording</h3>
                                    <p id="screen-status-text">Checking...</p>
                                </div>
                            </div>
                        </div>

                        <!-- Step 4: Success -->
                        <div id="success-state" style="display: none;">
                            <div class="success-icon">
                                <svg width="80" height="80" viewBox="0 0 24 24" fill="none">
                                    <path d="M9 12L11 14L15 10" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                                </svg>
                            </div>
                            <h1>You're all set!</h1>
                            <p class="subtitle">TheQuickFox is ready to use.</p>

                            <div class="next-step">
                                <div class="keyboard-hint">
                                    <span class="key-visual">
                                        <span class="key-symbol">^</span>
                                        <span class="key-text">control</span>
                                    </span>
                                    <span class="times-badge">x2</span>
                                </div>
                                <p class="hint-text">Press Control twice in any app to summon TheQuickFox</p>
                            </div>

                            <button class="close-btn" onclick="closeOnboarding()">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="navigation">
            <button class="nav-button back-button" onclick="navigateBack()" style="visibility: hidden;">Back</button>
            <div class="progress-dots">
                <span class="dot active" data-panel="1"></span>
                <span class="dot" data-panel="2"></span>
                <span class="dot" data-panel="3"></span>
                <span class="dot" data-panel="4"></span>
                <span class="dot" data-panel="5"></span>
            </div>
            <div class="nav-right">
                <button class="nav-button skip-button" id="skip-btn" onclick="skipToPermissions()">Skip</button>
                <button class="nav-button continue-button" id="continue-btn" onclick="navigateNext()">Continue</button>
            </div>
        </div>
    </div>

    <!-- Confetti Canvas -->
    <canvas id="confetti-canvas"></canvas>

    <!-- Video Zoom Modal -->
    <div class="video-modal" id="video-modal" onclick="closeVideoModal()">
        <button class="video-modal-close">Press anywhere to close</button>
        <video id="modal-video" autoplay loop muted playsinline>
            <source src="" type="video/mp4">
        </video>
    </div>

    <script src="app.js"></script>
    <script>
        // Video zoom functionality
        function openVideoModal(videoSrc) {
            const modal = document.getElementById('video-modal');
            const modalVideo = document.getElementById('modal-video');
            modalVideo.src = videoSrc;
            modal.classList.add('visible');
            modalVideo.play();
        }

        function closeVideoModal() {
            const modal = document.getElementById('video-modal');
            const modalVideo = document.getElementById('modal-video');
            modal.classList.remove('visible');
            modalVideo.pause();
        }

        // Add click handlers to permission videos
        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('.permission-demo-video').forEach(container => {
                container.addEventListener('click', () => {
                    const video = container.querySelector('video source');
                    if (video) {
                        openVideoModal(video.src);
                    }
                });
            });
        });
    </script>
</body>
</html>
