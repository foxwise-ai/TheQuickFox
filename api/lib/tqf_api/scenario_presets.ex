defmodule TqfApi.ScenarioPresets do
  @moduledoc """
  Predefined app contexts for public demo scenarios.
  Provides fake OCR/context data since the website demo can't capture real screens.
  Uses the same Prompts module as the real app flow.
  """

  alias TqfApi.Prompts

  @doc """
  Get the OpenAI request parameters for a given scenario.
  Returns {:ok, params} or {:error, :invalid_scenario}
  """
  def get_scenario_params(scenario_id, user_message, _context \\ nil) do
    case get_scenario_context(scenario_id) do
      {:ok, %{app_info: app_info, context_text: context_text, tone: tone} = context} ->
        mode = Map.get(context, :mode, "compose")
        image_base64 = Map.get(context, :image_base64)

        messages =
          if image_base64 do
            Prompts.build_messages_with_image(mode, user_message, app_info, context_text, image_base64, tone: tone)
          else
            Prompts.build_messages(mode, user_message, app_info, context_text, tone: tone)
          end

        # Ask mode needs more tokens for detailed feedback
        max_tokens = if mode == "ask", do: 1000, else: 300

        {:ok,
         %{
           "messages" => messages,
           "temperature" => 0.7,
           "max_tokens" => max_tokens
         }}

      {:error, _} = error ->
        error
    end
  end

  @doc """
  Get list of available scenario IDs
  """
  def available_scenarios do
    ["whatsapp", "linkedin", "email", "flirty", "linkedin_recruiter", "article_summary", "logo_feedback"]
  end

  @doc """
  Get the app context for a scenario (app_info, context_text, tone)
  """
  def get_scenario_context("whatsapp") do
    {:ok,
     %{
       app_info: %{
         "bundle_id" => "com.apple.Safari.WebApp.4DC7B79C-78CE-4313-BB61-F603663A2E20",
         "app_name" => "WhatsApp",
         "window_title" => "WhatsApp"
       },
       context_text: whatsapp_context(),
       tone: "friendly"
     }}
  end

  def get_scenario_context("linkedin") do
    {:ok,
     %{
       app_info: %{
         "bundle_id" => "com.google.Chrome",
         "app_name" => "Google Chrome",
         "window_title" => "Messaging | LinkedIn"
       },
       context_text: linkedin_context(),
       tone: "formal"
     }}
  end

  def get_scenario_context("email") do
    {:ok,
     %{
       app_info: %{
         "bundle_id" => "com.google.Chrome",
         "app_name" => "Google Chrome",
         "window_title" => "Re: Q4 Analytics Report - Urgent - Gmail"
       },
       context_text: email_context(),
       tone: "formal"
     }}
  end

  def get_scenario_context("flirty") do
    {:ok,
     %{
       app_info: %{
         "bundle_id" => "com.google.Chrome",
         "app_name" => "Google Chrome",
         "window_title" => "Tinder - Messages - Jordan"
       },
       context_text: flirty_context(),
       tone:
         "playful and flirty. Goals is to get laid. if 10/10 is the limit, go 11/10..but keep it tight..reduce use of emojis"
     }}
  end

  def get_scenario_context("linkedin_recruiter") do
    {:ok,
     %{
       app_info: %{
         "bundle_id" => "com.google.Chrome",
         "app_name" => "Google Chrome",
         "window_title" => "Messaging | LinkedIn"
       },
       context_text: linkedin_recruiter_context(),
       tone: "formal"
     }}
  end

  def get_scenario_context("article_summary") do
    {:ok,
     %{
       app_info: %{
         "bundle_id" => "com.google.Chrome",
         "app_name" => "Google Chrome",
         "window_title" => "The Science of Better Sleep"
       },
       context_text: article_summary_context(),
       tone: "helpful",
       mode: "ask"
     }}
  end

  def get_scenario_context("logo_feedback") do
    {:ok,
     %{
       app_info: %{
         "bundle_id" => "com.figma.Desktop",
         "app_name" => "Figma",
         "window_title" => "Logo Design - Figma"
       },
       context_text: logo_feedback_context(),
       image_base64: logo_feedback_image(),
       tone: "helpful and constructive",
       mode: "ask"
     }}
  end

  def get_scenario_context(_), do: {:error, :invalid_scenario}

  ## Context data for each scenario (simulated OCR output)

  defp whatsapp_context do
    ~S"""
    {"observations":[{"quad":{"bottomLeft":{"y":0.02866511675513006,"x":0.47670604373305131},"topRight":{"x":0.52474744583896693,"y":0.014723312854996395},"bottomRight":{"x":0.52466996103244157,"y":0.029185702720839646},"topLeft":{"x":0.47678352853957667,"y":0.014202726889286921}},"confidence":1,"text":"WhatsApp"},{"text":"Chats","quad":{"bottomLeft":{"y":0.076096747757046224,"x":0.010101278530779014},"topLeft":{"x":0.010249691368972337,"y":0.055436667929216643},"topRight":{"x":0.058212673997150667,"y":0.056134657352952422},"bottomRight":{"y":0.076794737180782002,"x":0.058064261158957346}},"confidence":1},{"text":"Ask Meta Al or Search","confidence":1,"quad":{"topRight":{"x":0.1482558138215129,"y":0.10743801658292085},"bottomLeft":{"y":0.12190082618567422,"x":0.043604653387789405},"bottomRight":{"x":0.1482558138215129,"y":0.12190082618567422},"topLeft":{"x":0.043604653387789405,"y":0.10743801658292085}}},{"confidence":1,"quad":{"topRight":{"x":0.033430232515584794,"y":0.15702479345964249},"topLeft":{"x":0.018895349122012094,"y":0.15702479345964249},"bottomLeft":{"x":0.018895349122012094,"y":0.17148760306239597},"bottomRight":{"x":0.033430232515584794,"y":0.17148760306239597}},"text":"All"},{"text":"Unread","confidence":1,"quad":{"topRight":{"y":0.15708960777291692,"x":0.090127613944423063},"topLeft":{"y":0.15696002126462272,"x":0.055243954328255365},"bottomRight":{"x":0.090104882008577095,"y":0.16948625993048405},"bottomLeft":{"x":0.055221222392409397,"y":0.16935667342218985}}},{"quad":{"bottomRight":{"x":0.15553907521450089,"y":0.16930797042131229},"bottomLeft":{"x":0.11193463477175053,"y":0.16953492236904544},"topLeft":{"x":0.1119027841610386,"y":0.15713831078270712},"topRight":{"y":0.15691135883497398,"x":0.15550722460378899}},"text":"Favorites","confidence":1},{"confidence":1,"text":"Groups","quad":{"bottomLeft":{"x":0.17732558138846863,"y":0.16942148745662611},"topLeft":{"y":0.15702479322519214,"x":0.17732558138846863},"topRight":{"y":0.15702479322519214,"x":0.2122093015330431},"bottomRight":{"y":0.16942148745662611,"x":0.2122093015330431}}},{"text":"CC","confidence":0.30000001192092896,"quad":{"bottomRight":{"x":0.040697674334803216,"y":0.23760330519335726},"bottomLeft":{"y":0.23760330519335726,"x":0.020348837583801429},"topRight":{"x":0.040697674334803216,"y":0.21900826484796498},"topLeft":{"y":0.21900826484796498,"x":0.020348837583801429}}},{"quad":{"topRight":{"x":0.11916441978272724,"y":0.20648265263777699},"bottomRight":{"y":0.22714371919796117,"x":0.11920751037781775},"topLeft":{"y":0.20674057846473914,"x":0.058118070000381758},"bottomLeft":{"x":0.058161160595472279,"y":0.22740164502492344}},"text":"Clingy Cliff","confidence":1},{"confidence":1,"quad":{"topRight":{"x":0.22529069647206423,"y":0.23347107459974037},"bottomRight":{"y":0.2500000000746927,"x":0.22529069647206423},"bottomLeft":{"x":0.059593028600610116,"y":0.2500000000746927},"topLeft":{"y":0.23347107459974037,"x":0.059593028600610116}},"text":"Did I do something wrong? I thought"},{"text":"Wifey","confidence":0.5,"quad":{"bottomRight":{"x":0.091569768103520313,"y":0.30578512323025664},"bottomLeft":{"x":0.058139534890665721,"y":0.30578512323025664},"topLeft":{"x":0.058139534890665721,"y":0.28512396751354496},"topRight":{"y":0.28512396751354496,"x":0.091569768103520313}}},{"text":"Can't wait to see you tonight!","quad":{"bottomRight":{"y":0.33057851231687252,"x":0.19186046267727802},"topLeft":{"x":0.059593022388129045,"y":0.31611570271411904},"bottomLeft":{"y":0.33057851231687252,"x":0.059593022388129045},"topRight":{"x":0.19186046267727802,"y":0.31611570271411904}},"confidence":1},{"text":"Tech Team v","confidence":1,"quad":{"bottomRight":{"y":0.38655462226283466,"x":0.12790697665620238},"topRight":{"x":0.12790697665620238,"y":0.36974789907287975},"bottomLeft":{"x":0.0581395363670534,"y":0.38655462226283466},"topLeft":{"y":0.36974789907287975,"x":0.0581395363670534}}},{"text":"Sarah: Meeting moved to 3pm","confidence":1,"quad":{"topLeft":{"x":0.059593025663888667,"y":0.39443277350399708},"topRight":{"y":0.39443277350399708,"x":0.19622093237874683},"bottomRight":{"x":0.19622093237874683,"y":0.41123949569219331},"bottomLeft":{"y":0.41123949569219331,"x":0.059593025663888667}}},{"confidence":1,"quad":{"bottomLeft":{"y":0.46487603283827617,"x":0.058139534790083075},"topLeft":{"x":0.058139534790083075,"y":0.44834710786420318},"topRight":{"y":0.44834710786420318,"x":0.13372092843666114},"bottomRight":{"x":0.13372092843666114,"y":0.46487603283827617}},"text":"Marcus Chen"},{"text":"That's awesome! Let's celebrate","confidence":1,"quad":{"bottomLeft":{"x":0.059593023530815206,"y":0.49173553692947591},"bottomRight":{"y":0.49173553692947591,"x":0.20494186309709173},"topLeft":{"x":0.059593023530815206,"y":0.47727272732672243},"topRight":{"y":0.47727272732672243,"x":0.20494186309709173}}},{"text":"Family Group","quad":{"bottomRight":{"y":0.54999038540122991,"x":0.13366005960086649},"topLeft":{"y":0.52645589512043744,"x":0.058200404064369715},"bottomLeft":{"y":0.54918253009167139,"x":0.058080493067591291},"topRight":{"y":0.52726375042999596,"x":0.1337799705976449}},"confidence":1},{"quad":{"topLeft":{"x":0.059593026964145125,"y":0.55567226903196609},"topRight":{"y":0.55567226903196609,"x":0.23401162768701758},"bottomLeft":{"y":0.57247899172104166,"x":0.059593026964145125},"bottomRight":{"y":0.57247899172104166,"x":0.23401162768701758}},"confidence":1,"text":"Mom: Don't forget grandma's birthday!"},{"confidence":0.30000001192092896,"text":"CC","quad":{"topLeft":{"x":0.32703488415356891,"y":0.064049587162014587},"bottomRight":{"x":0.34738372090457065,"y":0.082644627507406865},"bottomLeft":{"y":0.082644627507406865,"x":0.32703488415356891},"topRight":{"x":0.34738372090457065,"y":0.064049587162014587}}},{"text":"Clingy Cliff","confidence":1,"quad":{"topLeft":{"y":0.055283545084261143,"x":0.36200434261377618},"bottomRight":{"x":0.42287937729796093,"y":0.076947858993647533},"topRight":{"x":0.42304719864017581,"y":0.056288079693438631},"bottomLeft":{"y":0.075943324384470046,"x":0.3618365212715613}}},{"quad":{"topLeft":{"x":0.36191860598089359,"y":0.07644628077684501},"topRight":{"y":0.07644628077684501,"x":0.38953488302104433},"bottomRight":{"x":0.38953488302104433,"y":0.088842975008278979},"bottomLeft":{"y":0.088842975008278979,"x":0.36191860598089359}},"text":"online","confidence":1},{"confidence":1,"text":"09:42","quad":{"topLeft":{"x":0.25290697794428185,"y":0.20661157003304331},"bottomLeft":{"x":0.25290697794428185,"y":0.21900826426447739},"topRight":{"y":0.20661157003304331,"x":0.27761627830571811},"bottomRight":{"y":0.21900826426447739,"x":0.27761627830571811}}},{"quad":{"bottomRight":{"y":0.15289256165399379,"x":0.42877907084053618},"bottomLeft":{"y":0.15289256165399379,"x":0.36046511748310711},"topLeft":{"x":0.36046511748310711,"y":0.13842975205124042},"topRight":{"y":0.13842975205124042,"x":0.42877907084053618}},"confidence":1,"text":"Hey... 3:00 PM"},{"text":"You've been really distant lately and always \"busy\" when I want to hang out","confidence":1,"quad":{"bottomRight":{"x":0.71656976866298938,"y":0.2027310922426},"bottomLeft":{"x":0.36046512692809546,"y":0.2027310922426},"topLeft":{"x":0.36046512692809546,"y":0.18382352921738998},"topRight":{"x":0.71656976866298938,"y":0.18382352921738998}}},{"text":"3:00 PM","confidence":1,"quad":{"topLeft":{"y":0.20850840360443734,"x":0.36627907140489224},"bottomRight":{"y":0.22111344562124413,"x":0.39970930180247211},"bottomLeft":{"x":0.36627907140489224,"y":0.22111344562124413},"topRight":{"x":0.39970930180247211,"y":0.20850840360443734}}},{"text":"Did I do something wrong? I thought we were best friends... 3:00PM","confidence":1,"quad":{"bottomRight":{"y":0.27685950386100333,"x":0.67877906290777124},"topLeft":{"y":0.26033057888693056,"x":0.36046511518089169},"topRight":{"x":0.67877906290777124,"y":0.26033057888693056},"bottomLeft":{"x":0.36046511518089169,"y":0.27685950386100333}}},{"quad":{"topRight":{"x":0.27761627839656111,"y":0.28719008253304334},"bottomLeft":{"y":0.29958677676447731,"x":0.25290697803512485},"bottomRight":{"y":0.29958677676447731,"x":0.27761627839656111},"topLeft":{"y":0.28719008253304334,"x":0.25290697803512485}},"text":"09:42","confidence":1},{"quad":{"topRight":{"x":0.27744689613809259,"y":0.37082890920143463},"topLeft":{"y":0.37298069948774715,"x":0.23532212045918346},"bottomRight":{"x":0.27775927620738888,"y":0.38321764796586888},"bottomLeft":{"x":0.23563450052847976,"y":0.38536943825218151}},"text":"Yesterday","confidence":1},{"text":"06:14","quad":{"topRight":{"x":0.27761627839656111,"y":0.44834710732643179},"bottomLeft":{"x":0.25290697803512485,"y":0.46074380155786576},"topLeft":{"x":0.25290697803512485,"y":0.44834710732643179},"bottomRight":{"y":0.46074380155786576,"x":0.27761627839656111}},"confidence":1},{"quad":{"topRight":{"y":0.53099173576090475,"x":0.29505813967630845},"bottomRight":{"y":0.54132231361926064,"x":0.29505813967630845},"bottomLeft":{"x":0.26889534956787758,"y":0.54132231361926064},"topLeft":{"x":0.26889534956787758,"y":0.53099173576090475}},"text":"09:33","confidence":1},{"text":"Alex Martinez","confidence":1,"quad":{"bottomLeft":{"y":0.63025210111779162,"x":0.058139537225385882},"topLeft":{"x":0.058139537225385882,"y":0.61134453809258149},"bottomRight":{"y":0.63025210111779162,"x":0.13517441780368386},"topRight":{"y":0.61134453809258149,"x":0.13517441780368386}}},{"text":"r v Sounds good, see you then","quad":{"topRight":{"x":0.2020348824897642,"y":0.63636363658321149},"topLeft":{"x":0.059593028048026415,"y":0.63636363658321149},"bottomLeft":{"y":0.65289256155728437,"x":0.059593028048026415},"bottomRight":{"y":0.65289256155728437,"x":0.2020348824897642}},"confidence":1},{"text":"09:04","confidence":1,"quad":{"topLeft":{"y":0.61363636386007825,"x":0.27034883860319658},"bottomLeft":{"y":0.62396694171843414,"x":0.27034883860319658},"topRight":{"x":0.29505813896463284,"y":0.61363636386007825},"bottomRight":{"y":0.62396694171843414,"x":0.29505813896463284}}},{"confidence":1,"text":"Sophia Johnson","quad":{"topRight":{"y":0.692148760757056,"x":0.14970930291392154},"bottomLeft":{"y":0.71074380110244828,"x":0.058139536126776123},"bottomRight":{"y":0.71074380110244828,"x":0.14970930291392154},"topLeft":{"y":0.692148760757056,"x":0.058139536126776123}}},{"confidence":1,"quad":{"topRight":{"x":0.16279069481872122,"y":0.71900826480089597},"bottomRight":{"y":0.73371848727355971,"x":0.16279069481872122},"topLeft":{"y":0.71900826480089597,"x":0.059593026947267119},"bottomLeft":{"x":0.059593026947267119,"y":0.73371848727355971}},"text":"r You: Perfect, thanks!"},{"text":"James Parker","quad":{"topLeft":{"x":0.059593025597478901,"y":0.77048319282211142},"bottomRight":{"x":0.13662790617577686,"y":0.78728991601206644},"topRight":{"x":0.13662790617577686,"y":0.77048319282211142},"bottomLeft":{"x":0.059593025597478901,"y":0.78728991601206644}},"confidence":1},{"confidence":1,"quad":{"topLeft":{"y":0.79936974790729332,"x":0.05959302130749429},"bottomRight":{"x":0.18895348773320347,"y":0.81198347116530378},"bottomLeft":{"x":0.05959302130749429,"y":0.81198347116530378},"topRight":{"x":0.18895348773320347,"y":0.79936974790729332}},"text":"Check out this video I found!"},{"quad":{"topRight":{"y":0.69275268941364765,"x":0.27775811044405985},"bottomLeft":{"y":0.70394152507059116,"x":0.25276514581562204},"bottomRight":{"y":0.70514217549009883,"x":0.27746077520294621},"topLeft":{"x":0.25306248105673568,"y":0.69155203899413997}},"text":"08:07","confidence":1},{"text":"07:56","confidence":1,"quad":{"bottomLeft":{"y":0.78512396684712205,"x":0.27034883850024122},"topLeft":{"x":0.27034883850024122,"y":0.77272727261568797},"bottomRight":{"y":0.78512396684712205,"x":0.29505813886167742},"topRight":{"y":0.77272727261568797,"x":0.29505813886167742}}},{"text":"Maya Patel","confidence":1,"quad":{"bottomLeft":{"y":0.87422559180103243,"x":0.058181221232386483},"topRight":{"x":0.12205133661811066,"y":0.85304713588726433},"bottomRight":{"x":0.12213388328860909,"y":0.87370795902007581},"topLeft":{"x":0.058098674561888039,"y":0.85356476866822095}}},{"text":"v v Let me know when you're free","confidence":1,"quad":{"bottomLeft":{"y":0.89462809878180227,"x":0.059593028966275587},"topRight":{"x":0.21366279012287154,"y":0.87809917380772939},"topLeft":{"x":0.059593028966275587,"y":0.87809917380772939},"bottomRight":{"y":0.89462809878180227,"x":0.21366279012287154}}},{"quad":{"bottomRight":{"x":0.29505813880421544,"y":0.86776859511847193},"topRight":{"x":0.29505813880421544,"y":0.85537190088703785},"bottomLeft":{"x":0.26889534869578458,"y":0.86776859511847193},"topLeft":{"x":0.26889534869578458,"y":0.85537190088703785}},"text":"06:20","confidence":1},{"quad":{"topLeft":{"x":0.058139535865148223,"y":0.9359243698846843},"bottomRight":{"y":0.95454545395368784,"x":0.14970930265229362},"topRight":{"y":0.9359243698846843,"x":0.14970930265229362},"bottomLeft":{"x":0.058139535865148223,"y":0.95454545395368784}},"text":"Ryan Thompson","confidence":1},{"quad":{"topRight":{"y":0.96060924375407908,"x":0.18168604137668415},"topLeft":{"y":0.96060924375407908,"x":0.05959302650122289},"bottomLeft":{"x":0.05959302650122289,"y":0.9753151261070202},"bottomRight":{"y":0.9753151261070202,"x":0.18168604137668415}},"text":"Are you available for a call?","confidence":1},{"confidence":1,"quad":{"bottomRight":{"y":0.94834710734298977,"x":0.29505813886167742},"bottomLeft":{"x":0.27034883850024122,"y":0.94834710734298977},"topLeft":{"y":0.93595041311155569,"x":0.27034883850024122},"topRight":{"y":0.93595041311155569,"x":0.29505813886167742}},"text":"06:15"},{"text":"Type a message","quad":{"bottomLeft":{"x":0.32848837293039229,"y":0.96280991668096072},"topLeft":{"y":0.94421487633556833,"x":0.32848837293039229},"topRight":{"y":0.94421487633556833,"x":0.41133720686611941},"bottomRight":{"y":0.96280991668096072,"x":0.41133720686611941}},"confidence":1}],"latencyMs":698.31825000000003,"texts":"WhatsApp\nChats\nAsk Meta Al or Search\nAll\nUnread\nFavorites\nGroups\nCC\nClingy Cliff\nDid I do something wrong? I thought\nWifey\nCan't wait to see you tonight!\nTech Team v\nSarah: Meeting moved to 3pm\nMarcus Chen\nThat's awesome! Let's celebrate\nFamily Group\nMom: Don't forget grandma's birthday!\nCC\nClingy Cliff\nonline\n09:42\nHey... 3:00 PM\nYou've been really distant lately and always \"busy\" when I want to hang out\n3:00 PM\nDid I do something wrong? I thought we were best friends... 3:00PM\n09:42\nYesterday\n06:14\n09:33\nAlex Martinez\nr v Sounds good, see you then\n09:04\nSophia Johnson\nr You: Perfect, thanks!\nJames Parker\nCheck out this video I found!\n08:07\n07:56\nMaya Patel\nv v Let me know when you're free\n06:20\nRyan Thompson\nAre you available for a call?\n06:15\nType a message","text":"WhatsApp\nChats\nAsk Meta Al or Search\nAll\nUnread\nFavorites\nGroups\nCC\nClingy Cliff\nDid I do something wrong? I thought\nWifey\nCan't wait to see you tonight!\nTech Team v\nSarah: Meeting moved to 3pm\nMarcus Chen\nThat's awesome! Let's celebrate\nFamily Group\nMom: Don't forget grandma's birthday!\nCC\nClingy Cliff\nonline\n09:42\nHey... 3:00 PM\nYou've been really distant lately and always \"busy\" when I want to hang out\n3:00 PM\nDid I do something wrong? I thought we were best friends... 3:00PM\n09:42\nYesterday\n06:14\n09:33\nAlex Martinez\nr v Sounds good, see you then\n09:04\nSophia Johnson\nr You: Perfect, thanks!\nJames Parker\nCheck out this video I found!\n08:07\n07:56\nMaya Patel\nv v Let me know when you're free\n06:20\nRyan Thompson\nAre you available for a call?\n06:15\nType a message"}
    """
  end

  defp linkedin_context do
    ~S"""
    {"text":"Linkedin Messaging\nin\nMessaging\nJake Morrison\nVP of Sales at TechFlow\nJM\nMJ\nAC\nMW\nRF\nTB\nSM\nBL\nNP\nCT\nDK\nJake Morrison\nVP of Sales at TechFlow\nYou: Just circling back on this - wou...\n3d\nMilly Jackson\nVP of Sales at StreamTech\nYou: Just circling back on this - woul...\n4d\nAmanda Chen\nEnterprise AE at SalesForce\nFollowing up on our call - sent over t...\n3h\nMarcus Williams\nSDR at HubSpot\nI noticed you downloaded our State ...\n5h\nRachel Foster\nVP of Sales at Zendesk\nThanks for connecting! Love what yo...\n1d\nTyler Brooks\nBDR at Outreach.io\nQuick question - what's your current ...\n1d.\nSophia Martinez\nAccount Executive at Gong.io\nYour demo with our team was great! ...\n2d\nBrandon Lee\nSDR Manager at Clari\nCongrats on hitting your quota last q...\n2d\nNicole Patterson\nEnterprise SDR at Drift\nSaw you visited our pricing page 3 ti...\n3d\nChris Thompson\nSales Director at Salesloft\nLoved your LinkedIn post about cold ...\n4d\n5d\nDavid Kim\nSDR at Apollo.io\nYour company just popped up in our ...\nWrite a message...\nHey Jake! Congrats on the Series B - saw the news on TechCrunch. I help sales teams\nlike yours close 40% more deals. Quick 15-min demo?\n2 weeks ago\nHey! Thanks for reaching out. We're actually evaluating CRMs right now, so good\ntiming. Let me check my calendar and get back to you.\n2 weeks ago\nME\nSounds great! I'm free Thursday or Friday afternoon if either works for you.\nSeen 2 weeks ago\nME\nSend","latencyMs":1016.06375,"observations":[{"quad":{"topLeft":{"x":0.456,"y":0.014},"bottomRight":{"x":0.544,"y":0.028},"topRight":{"y":0.014,"x":0.544},"bottomLeft":{"x":0.456,"y":0.028}},"text":"Linkedin Messaging","confidence":1},{"quad":{"bottomLeft":{"x":0.269,"y":0.109},"topLeft":{"x":0.269,"y":0.095},"topRight":{"y":0.095,"x":0.347},"bottomRight":{"x":0.347,"y":0.109}},"text":"Jake Morrison","confidence":1},{"text":"VP of Sales at TechFlow","quad":{"topRight":{"x":0.368,"y":0.113},"topLeft":{"y":0.113,"x":0.267},"bottomRight":{"x":0.368,"y":0.125},"bottomLeft":{"x":0.267,"y":0.125}},"confidence":1},{"text":"Hey Jake! Congrats on the Series B - saw the news on TechCrunch. I help sales teams","confidence":1,"quad":{"topLeft":{"x":0.536,"y":0.182},"topRight":{"y":0.182,"x":0.936},"bottomLeft":{"y":0.196,"x":0.536},"bottomRight":{"y":0.196,"x":0.936}}},{"confidence":1,"quad":{"topLeft":{"x":0.536,"y":0.200},"topRight":{"x":0.789,"y":0.200},"bottomRight":{"x":0.789,"y":0.216},"bottomLeft":{"y":0.216,"x":0.536}},"text":"like yours close 40% more deals. Quick 15-min demo?"},{"text":"2 weeks ago","confidence":1,"quad":{"topLeft":{"y":0.234,"x":0.528},"bottomRight":{"x":0.577,"y":0.246},"bottomLeft":{"x":0.528,"y":0.246},"topRight":{"x":0.577,"y":0.234}}},{"confidence":1,"text":"Hey! Thanks for reaching out. We're actually evaluating CRMs right now, so good","quad":{"bottomRight":{"x":0.685,"y":0.291},"topRight":{"x":0.685,"y":0.275},"bottomLeft":{"x":0.310,"y":0.291},"topLeft":{"x":0.310,"y":0.275}}},{"confidence":1,"text":"timing. Let me check my calendar and get back to you.","quad":{"bottomRight":{"y":0.309,"x":0.564},"topLeft":{"x":0.310,"y":0.293},"topRight":{"x":0.564,"y":0.293},"bottomLeft":{"y":0.309,"x":0.310}}},{"confidence":1,"quad":{"bottomLeft":{"x":0.299,"y":0.341},"topLeft":{"y":0.329,"x":0.299},"topRight":{"x":0.350,"y":0.329},"bottomRight":{"x":0.350,"y":0.341}},"text":"2 weeks ago"},{"text":"ME","quad":{"topLeft":{"x":0.961,"y":0.176},"bottomRight":{"x":0.978,"y":0.192},"bottomLeft":{"y":0.192,"x":0.961},"topRight":{"x":0.978,"y":0.176}},"confidence":1},{"quad":{"bottomRight":{"y":0.386,"x":0.943},"topLeft":{"x":0.596,"y":0.370},"topRight":{"y":0.370,"x":0.943},"bottomLeft":{"y":0.386,"x":0.596}},"confidence":1,"text":"Sounds great! I'm free Thursday or Friday afternoon if either works for you."},{"confidence":1,"text":"Seen 2 weeks ago","quad":{"bottomRight":{"x":0.657,"y":0.414},"topRight":{"x":0.657,"y":0.402},"topLeft":{"y":0.402,"x":0.587},"bottomLeft":{"x":0.587,"y":0.414}}},{"quad":{"bottomLeft":{"x":0.961,"y":0.380},"bottomRight":{"x":0.980,"y":0.380},"topLeft":{"x":0.961,"y":0.364},"topRight":{"x":0.980,"y":0.364}},"text":"ME","confidence":0.5},{"text":"Send","confidence":1,"quad":{"topRight":{"y":0.960,"x":0.968},"bottomLeft":{"x":0.939,"y":0.975},"bottomRight":{"y":0.974,"x":0.968},"topLeft":{"y":0.961,"x":0.939}}}],"texts":"Linkedin Messaging\nin\nMessaging\nJake Morrison\nVP of Sales at TechFlow\nJM\nMJ\nAC\nMW\nRF\nTB\nSM\nBL\nNP\nCT\nDK\nJake Morrison\nVP of Sales at TechFlow\nYou: Just circling back on this - wou...\n3d\nMilly Jackson\nVP of Sales at StreamTech\nYou: Just circling back on this - woul...\n4d\nAmanda Chen\nEnterprise AE at SalesForce\nFollowing up on our call - sent over t...\n3h\nMarcus Williams\nSDR at HubSpot\nI noticed you downloaded our State ...\n5h\nRachel Foster\nVP of Sales at Zendesk\nThanks for connecting! Love what yo...\n1d\nTyler Brooks\nBDR at Outreach.io\nQuick question - what's your current ...\n1d.\nSophia Martinez\nAccount Executive at Gong.io\nYour demo with our team was great! ...\n2d\nBrandon Lee\nSDR Manager at Clari\nCongrats on hitting your quota last q...\n2d\nNicole Patterson\nEnterprise SDR at Drift\nSaw you visited our pricing page 3 ti...\n3d\nChris Thompson\nSales Director at Salesloft\nLoved your LinkedIn post about cold ...\n4d\n5d\nDavid Kim\nSDR at Apollo.io\nYour company just popped up in our ...\nWrite a message...\nHey Jake! Congrats on the Series B - saw the news on TechCrunch. I help sales teams\nlike yours close 40% more deals. Quick 15-min demo?\n2 weeks ago\nHey! Thanks for reaching out. We're actually evaluating CRMs right now, so good\ntiming. Let me check my calendar and get back to you.\n2 weeks ago\nME\nSounds great! I'm free Thursday or Friday afternoon if either works for you.\nSeen 2 weeks ago\nME\nSend"
    """
  end

  defp email_context do
    ~S"""
    {"latencyMs":834.60862499999996,"text":"=\nM Gmail\ni Compose\nInbox\n# Starred\nSnoozed\n• Sent\nDrafts\n• More\n4\n2\nInbox - Gmail\na Search mail\nExpense Report - Client Dinner Dec 12\nA Marcus Chen\nMarcus Chen <marcus.chen@company.com>\nHi!\nPlease find attached my expense report for the client dinner last Thursday with the Acme Corp team.\nTotal: $347.82\n- Dinner at Capitale: $312.50\n- Parking: $35.32\nReceipts are attached. Let me know if you need anything else!\nThanks,\nMarcus Chen\nSenior Account Executive\n# Click here to Reply\n1:00 PM (0 minutes ago)\nInbox","observations":[{"confidence":1,"quad":{"topRight":{"y":0.059917355789808502,"x":0.040697674011369797},"bottomRight":{"x":0.040697674011369797,"y":0.08884297499531546},"topLeft":{"x":0.017441860581653465,"y":0.059917355789808502},"bottomLeft":{"y":0.08884297499531546,"x":0.017441860581653465}},"text":"="},{"quad":{"topLeft":{"y":0.057773109608336704,"x":0.05523255782404933},"topRight":{"y":0.057773109608336704,"x":0.12936046453890751},"bottomLeft":{"x":0.05523255782404933,"y":0.086776858982918759},"bottomRight":{"x":0.12936046453890751,"y":0.086776858982918759}},"text":"M Gmail","confidence":0.5},{"text":"i Compose","confidence":1,"quad":{"topRight":{"y":0.13346911666490269,"x":0.094362981834689677},"bottomRight":{"y":0.15206156646220448,"x":0.09458129794454756},"topLeft":{"y":0.13512851598600206,"x":0.024604750309198155},"bottomLeft":{"x":0.024823066419056031,"y":0.15372096578330374}}},{"text":"Inbox","confidence":0.5,"quad":{"bottomLeft":{"x":0.047965116106217336,"y":0.20661157032508348},"topLeft":{"x":0.047965116106217336,"y":0.1942148760936494},"bottomRight":{"x":0.079941859572077278,"y":0.20661157032508348},"topRight":{"x":0.079941859572077278,"y":0.1942148760936494}}},{"confidence":1,"text":"# Starred","quad":{"topLeft":{"y":0.22342965005935367,"x":0.024056467201482298},"topRight":{"x":0.085320401122254613,"y":0.21845331186114869},"bottomRight":{"y":0.23951811874722861,"x":0.086165014510710278},"bottomLeft":{"x":0.024901080589937959,"y":0.24449445694543359}}},{"text":"Snoozed","quad":{"topRight":{"y":0.26033057848198071,"x":0.091569767600931842},"bottomLeft":{"x":0.049418604351933626,"y":0.27272727271341468},"bottomRight":{"y":0.27272727271341468,"x":0.091569767600931842},"topLeft":{"x":0.049418604351933626,"y":0.26033057848198071}},"confidence":1},{"text":"• Sent","confidence":1,"quad":{"topLeft":{"x":0.024709303187999312,"y":0.29338843028155859},"bottomRight":{"x":0.072674416979151876,"y":0.30991735525563135},"topRight":{"x":0.072674416979151876,"y":0.29338843028155859},"bottomLeft":{"x":0.024709303187999312,"y":0.30991735525563135}}},{"text":"Drafts","quad":{"topRight":{"x":0.079941860501130835,"y":0.32644628107155715},"bottomLeft":{"y":0.34090909067431063,"x":0.05087209371398542},"bottomRight":{"x":0.079941860501130835,"y":0.34090909067431063},"topLeft":{"y":0.32644628107155715,"x":0.05087209371398542}},"confidence":1},{"quad":{"bottomRight":{"y":0.37445621223910897,"x":0.075508390594799787},"topLeft":{"y":0.35901486166285257,"x":0.026235795650222406},"bottomLeft":{"x":0.026094232375458801,"y":0.37347627180865217},"topRight":{"y":0.35999480209330936,"x":0.075649953869563386}},"text":"• More","confidence":1},{"confidence":0.5,"text":"4","quad":{"bottomRight":{"y":0.20661157001315356,"x":0.17005813954388738},"bottomLeft":{"y":0.20661157001315356,"x":0.16279069784710101},"topLeft":{"y":0.19214876041040019,"x":0.16279069784710101},"topRight":{"x":0.17005813954388738,"y":0.19214876041040019}}},{"confidence":0.5,"text":"2","quad":{"topRight":{"x":0.17005813938036993,"y":0.32644628103913442},"topLeft":{"y":0.32644628103913442,"x":0.16279069768358356},"bottomLeft":{"x":0.16279069768358356,"y":0.34297520601320719},"bottomRight":{"x":0.17005813938036993,"y":0.34297520601320719}}},{"quad":{"bottomRight":{"x":0.53197674483355861,"y":0.026859504125752443},"topRight":{"y":0.014462809894318363,"x":0.53197674483355861},"bottomLeft":{"y":0.026859504125752443,"x":0.47093023176527848},"topLeft":{"x":0.47093023176527848,"y":0.014462809894318363}},"confidence":0.5,"text":"Inbox - Gmail"},{"quad":{"topRight":{"x":0.30094953034394428,"y":0.064677906744851854},"bottomRight":{"x":0.30079066720593545,"y":0.087404058868375212},"bottomLeft":{"y":0.086148538616756531,"x":0.21213186352652905},"topLeft":{"y":0.063422386493233174,"x":0.21229072666453788}},"text":"a Search mail","confidence":1},{"quad":{"bottomLeft":{"x":0.24127907674026405,"y":0.22111344563813196},"topRight":{"x":0.51889534533459059,"y":0.19628099158984691},"topLeft":{"x":0.24127907674026405,"y":0.19628099158984691},"bottomRight":{"y":0.22111344563813196,"x":0.51889534533459059}},"confidence":1,"text":"Expense Report - Client Dinner Dec 12"},{"quad":{"topRight":{"x":0.35833333340092788,"y":0.23668639119747248},"topLeft":{"y":0.23668639119747248,"x":0.24166667048796087},"bottomLeft":{"y":0.28413865466893162,"x":0.24166667048796087},"bottomRight":{"x":0.35833333340092788,"y":0.28413865466893162}},"text":"A Marcus Chen","confidence":0.5},{"quad":{"bottomLeft":{"x":0.28343023577839055,"y":0.25840336143263842},"bottomRight":{"y":0.25840336143263842,"x":0.47819767606753955},"topRight":{"x":0.47819767606753955,"y":0.2436974790796973},"topLeft":{"y":0.2436974790796973,"x":0.28343023577839055}},"text":"Marcus Chen <marcus.chen@company.com>","confidence":0.5},{"quad":{"bottomLeft":{"x":0.23982558159356407,"y":0.32644628087546623},"bottomRight":{"x":0.25581395332649404,"y":0.32644628087546623},"topRight":{"x":0.25581395332649404,"y":0.30991735590139324},"topLeft":{"x":0.23982558159356407,"y":0.30991735590139324}},"text":"Hi!","confidence":1},{"text":"Please find attached my expense report for the client dinner last Thursday with the Acme Corp team.","quad":{"bottomRight":{"x":0.70784883762771644,"y":0.37190082639888211},"topLeft":{"x":0.24127907647112048,"y":0.35537190142480934},"bottomLeft":{"y":0.37190082639888211,"x":0.24127907647112048},"topRight":{"x":0.70784883762771644,"y":0.35537190142480934}},"confidence":1},{"confidence":1,"text":"Total: $347.82","quad":{"topRight":{"y":0.40073529400983832,"x":0.30523255677981348},"topLeft":{"x":0.24127906984809355,"y":0.40073529400983832},"bottomRight":{"x":0.30523255677981348,"y":0.41544117636277955},"bottomLeft":{"x":0.24127906984809355,"y":0.41544117636277955}}},{"confidence":1,"quad":{"topRight":{"y":0.42331932809104722,"x":0.37354651160012781},"bottomLeft":{"y":0.44222689111625724,"x":0.23982557874870947},"bottomRight":{"x":0.37354651160012781,"y":0.44222689111625724},"topLeft":{"x":0.23982557874870947,"y":0.42331932809104722}},"text":"- Dinner at Capitale: $312.50"},{"text":"- Parking: $35.32","confidence":1,"quad":{"bottomLeft":{"y":0.46487603267269617,"x":0.23982558079234476},"topLeft":{"x":0.23982558079234476,"y":0.44628099232730389},"topRight":{"y":0.44628099232730389,"x":0.31976744086463199},"bottomRight":{"x":0.31976744086463199,"y":0.46487603267269617}}},{"text":"Receipts are attached. Let me know if you need anything else!","confidence":1,"quad":{"bottomRight":{"x":0.52761627909012043,"y":0.51050420128555563},"bottomLeft":{"y":0.51050420128555563,"x":0.24127907764437553},"topLeft":{"y":0.49369747909735939,"x":0.24127907764437553},"topRight":{"y":0.49369747909735939,"x":0.52761627909012043}}},{"text":"Thanks,","confidence":1,"quad":{"bottomLeft":{"x":0.23974900878474686,"y":0.5554227089466941},"topRight":{"x":0.2776928509230584,"y":0.5396186135181632},"topLeft":{"x":0.23990517770483449,"y":0.53889527509049939},"bottomRight":{"y":0.55614604737435802,"x":0.27753668200297071}}},{"quad":{"topRight":{"y":0.56197479008718676,"x":0.30523255795229404},"topLeft":{"x":0.24127907102057414,"y":0.56197479008718676},"bottomRight":{"y":0.57851239630246343,"x":0.30523255795229404},"bottomLeft":{"y":0.57851239630246343,"x":0.24127907102057414}},"confidence":1,"text":"Marcus Chen"},{"text":"Senior Account Executive","confidence":1,"quad":{"bottomRight":{"y":0.60136554602543191,"x":0.36046511662968411},"bottomLeft":{"y":0.60136554602543191,"x":0.23982558305539331},"topLeft":{"x":0.23982558305539331,"y":0.58455882333635623},"topRight":{"y":0.58455882333635623,"x":0.36046511662968411}}},{"quad":{"bottomRight":{"x":0.36482557867331333,"y":0.6964285718540425},"topLeft":{"y":0.67331932815656348,"x":0.25290697795044087},"bottomLeft":{"y":0.6964285718540425,"x":0.25290697795044087},"topRight":{"y":0.67331932815656348,"x":0.36482557867331333}},"text":"# Click here to Reply","confidence":1},{"confidence":1,"quad":{"topRight":{"x":0.86046511358624456,"y":0.24369747902804439},"topLeft":{"x":0.76162791214049963,"y":0.24369747902804439},"bottomRight":{"y":0.25840336138098552,"x":0.86046511358624456},"bottomLeft":{"x":0.76162791214049963,"y":0.25840336138098552}},"text":"1:00 PM (0 minutes ago)"},{"text":"Inbox","confidence":0.5,"quad":{"bottomLeft":{"y":0.20867768606199799,"x":0.90552325578154025},"topRight":{"y":0.19628099183056391,"x":0.93168604588997106},"topLeft":{"y":0.19628099183056391,"x":0.90552325578154025},"bottomRight":{"x":0.93168604588997106,"y":0.20867768606199799}}}],"texts":"=\nM Gmail\ni Compose\nInbox\n# Starred\nSnoozed\n• Sent\nDrafts\n• More\n4\n2\nInbox - Gmail\na Search mail\nExpense Report - Client Dinner Dec 12\nA Marcus Chen\nMarcus Chen <marcus.chen@company.com>\nHi!\nPlease find attached my expense report for the client dinner last Thursday with the Acme Corp team.\nTotal: $347.82\n- Dinner at Capitale: $312.50\n- Parking: $35.32\nReceipts are attached. Let me know if you need anything else!\nThanks,\nMarcus Chen\nSenior Account Executive\n# Click here to Reply\n1:00 PM (0 minutes ago)\nInbox"}
    """
  end

  defp flirty_context do
    ~S"""
    {"observations":[{"confidence":0.5,"quad":{"bottomLeft":{"x":0.058139535206498928,"y":0.032619775973860676},"topRight":{"x":0.10755813940590417,"y":0.018604651616907497},"bottomRight":{"y":0.032619775973860676,"x":0.10755813940590417},"topLeft":{"x":0.058139535206498928,"y":0.018604651616907497}},"text":"• ImagineAPI"},{"quad":{"topLeft":{"y":0.06744186100125682,"x":0.037790698319151807},"topRight":{"y":0.06744186100125682,"x":0.10319767246573192},"bottomLeft":{"y":0.095348836859208252,"x":0.037790698319151807},"bottomRight":{"x":0.10319767246573192,"y":0.095348836859208252}},"confidence":0.5,"text":"Tinder"},{"confidence":1,"text":"DEMO APP","quad":{"bottomRight":{"x":0.1628032805261215,"y":0.088274061457409125},"topLeft":{"x":0.12062695314550953,"y":0.074516635746713522},"topRight":{"x":0.16277798114304667,"y":0.074320632343210291},"bottomLeft":{"x":0.12065225252858436,"y":0.088470064860912356}}},{"quad":{"bottomRight":{"x":0.20364800906696012,"y":0.16619423767029262},"topLeft":{"x":0.12920082887563841,"y":0.14310808839820999},"topRight":{"x":0.20331299803090253,"y":0.1406184588918743},"bottomLeft":{"x":0.12953583991169601,"y":0.16868386717662831}},"text":"Messages","confidence":1},{"text":"10 matches","confidence":1,"quad":{"topRight":{"y":0.16972477086247784,"x":0.17877906892383058},"topLeft":{"x":0.12936046472442533,"y":0.16972477086247784},"bottomLeft":{"x":0.12936046472442533,"y":0.18372093012727853},"bottomRight":{"x":0.17877906892383058,"y":0.18372093012727853}}},{"text":"Jordan","confidence":1,"quad":{"topLeft":{"y":0.234526310623145,"x":0.17592697011785796},"topRight":{"x":0.21226161312668682,"y":0.23524218561686094},"bottomLeft":{"x":0.17581978100980888,"y":0.24847874474686171},"bottomRight":{"x":0.21215442401863771,"y":0.24919461974057788}}},{"text":"5m","confidence":0.5,"quad":{"bottomLeft":{"y":0.24418604637274077,"x":0.32994186113088708},"topLeft":{"y":0.23255813944121262,"x":0.32994186113088708},"topRight":{"y":0.23255813944121262,"x":0.34447674400477191},"bottomRight":{"y":0.24418604637274077,"x":0.34447674400477191}}},{"text":"That sounds amazing! When are you...","confidence":1,"quad":{"bottomRight":{"x":0.34302325496152086,"y":0.2744186041918939},"topRight":{"y":0.25790010176691291,"x":0.34302325496152086},"bottomLeft":{"x":0.1773255877710371,"y":0.2744186041918939},"topLeft":{"x":0.1773255877710371,"y":0.25790010176691291}}},{"text":"Riley","confidence":1,"quad":{"bottomRight":{"y":0.33953488371672602,"x":0.19912790653166601},"topRight":{"x":0.19912790653166601,"y":0.32325581381815771},"topLeft":{"x":0.1758720939334503,"y":0.32325581381815771},"bottomLeft":{"y":0.33953488371672602,"x":0.1758720939334503}}},{"quad":{"bottomRight":{"y":0.36511627850390937,"x":0.33575581551844585},"topRight":{"y":0.34862385289836095,"x":0.33575581551844585},"bottomLeft":{"x":0.17441860711963539,"y":0.36511627850390937},"topLeft":{"x":0.17441860711963539,"y":0.34862385289836095}},"text":"Haha yes! Best pizza in town for sure","confidence":1},{"confidence":0.5,"text":"1h","quad":{"bottomLeft":{"y":0.33720930233658097,"x":0.33284883769346929},"topRight":{"y":0.3232558144076052,"x":0.34447674399257716},"bottomRight":{"x":0.34447674399257716,"y":0.33720930233658097},"topLeft":{"x":0.33284883769346929,"y":0.3232558144076052}}},{"quad":{"topRight":{"x":0.3444767437745539,"y":0.41395348832202661},"topLeft":{"x":0.33284883747544602,"y":0.41395348832202661},"bottomRight":{"y":0.42558139525355476,"x":0.3444767437745539},"bottomLeft":{"y":0.42558139525355476,"x":0.33284883747544602}},"text":"3h","confidence":0.5},{"confidence":1,"quad":{"topRight":{"y":0.41395348852128444,"x":0.20639534809458954},"topLeft":{"x":0.17587209284533298,"y":0.41395348852128444},"bottomRight":{"x":0.20639534809458954,"y":0.43023255744770772},"bottomLeft":{"x":0.17587209284533298,"y":0.43023255744770772}},"text":"Casey"},{"quad":{"topLeft":{"x":0.1729651159536589,"y":0.439347604398026},"topRight":{"x":0.34156976214711648,"y":0.439347604398026},"bottomLeft":{"x":0.1729651159536589,"y":0.45581395318414186},"bottomRight":{"x":0.34156976214711648,"y":0.45581395318414186}},"text":"I'd love that! How about Friday evening?","confidence":1},{"confidence":1,"quad":{"bottomRight":{"y":0.52325581302395097,"x":0.20348837148355761},"bottomLeft":{"y":0.52325581302395097,"x":0.17587209280907803},"topLeft":{"y":0.50465116310008007,"x":0.17587209280907803},"topRight":{"x":0.20348837148355761,"y":0.50465116310008007}},"text":"Avery"},{"text":"Absolutely! I know a great trail","quad":{"topRight":{"x":0.30087209200728421,"y":0.53007135592318499},"topLeft":{"x":0.1744186025057973,"y":0.53007135592318499},"bottomRight":{"x":0.30087209200728421,"y":0.54434250780901583},"bottomLeft":{"y":0.54434250780901583,"x":0.1744186025057973}},"confidence":1},{"text":"5h","confidence":0.5,"quad":{"topLeft":{"y":0.50232558138434935,"x":0.33284883742089916},"topRight":{"x":0.34593023200739548,"y":0.50232558138434935},"bottomRight":{"x":0.34593023200739548,"y":0.51627906931332512},"bottomLeft":{"y":0.51627906931332512,"x":0.33284883742089916}}},{"confidence":0.5,"quad":{"bottomLeft":{"x":0.17590592185768561,"y":0.61178147215810352},"bottomRight":{"y":0.61147398558801558,"x":0.20497517282772112},"topLeft":{"x":0.17583877978633503,"y":0.59550275806463182},"topRight":{"y":0.59519527149454377,"x":0.20490803075637051}},"text":"Quinn"},{"text":"Yesterday","confidence":1,"quad":{"topLeft":{"y":0.59571750374195565,"x":0.30663435067068073},"bottomLeft":{"x":0.30674035846095787,"y":0.60966996119715422},"topRight":{"x":0.34442243340296086,"y":0.59498120203597016},"bottomRight":{"x":0.344528441193238,"y":0.60893365949116873}}},{"quad":{"bottomRight":{"x":0.34447673953540991,"y":0.63506625887263446},"topRight":{"x":0.34447673953540991,"y":0.62079510698680362},"topLeft":{"x":0.17441861355325283,"y":0.62079510698680362},"bottomLeft":{"y":0.63506625887263446,"x":0.17441861355325283}},"text":"I'm reading 'The Midnight Library' right...","confidence":1},{"confidence":1,"quad":{"topRight":{"y":0.68577829384120337,"x":0.21361057744061762},"topLeft":{"x":0.17582118955252574,"y":0.68631546135047872},"bottomLeft":{"x":0.17592430657444214,"y":0.70491938119339992},"bottomRight":{"x":0.21371369446253402,"y":0.70438221368412457}},"text":"Morgan"},{"text":"Yesterday","confidence":1,"quad":{"topRight":{"y":0.68372093039597726,"x":0.34447674477136964},"bottomRight":{"x":0.34447674477136964,"y":0.69767441832495292},"topLeft":{"x":0.30668604687107226,"y":0.68372093039597726},"bottomLeft":{"x":0.30668604687107226,"y":0.69767441832495292}}},{"confidence":1,"text":"That would be awesome! Next Friday?","quad":{"topRight":{"x":0.33284883760852874,"y":0.71151885816670135},"bottomLeft":{"y":0.72579001005253208,"x":0.17441860821269209},"topLeft":{"y":0.71151885816670135,"x":0.17441860821269209},"bottomRight":{"y":0.72579001005253208,"x":0.33284883760852874}}},{"text":"Sage","quad":{"topLeft":{"y":0.77674418619570307,"x":0.17587209277282315},"bottomRight":{"x":0.20058139487252577,"y":0.79302325512212646},"bottomLeft":{"y":0.79302325512212646,"x":0.17587209277282315},"topRight":{"x":0.20058139487252577,"y":0.77674418619570307}},"confidence":1},{"text":"2 days ago","confidence":1,"quad":{"bottomLeft":{"y":0.7884813728583826,"x":0.3023397790290131},"topLeft":{"y":0.77452795735421476,"x":0.3023115560969199},"bottomRight":{"x":0.34449076817540053,"y":0.78826273937580249},"topRight":{"y":0.77430932387163465,"x":0.34446254524330733}}},{"text":"I'd love to! Sunday morning works for ...","quad":{"topRight":{"x":0.33866279342836308,"y":0.80224260920482571},"bottomLeft":{"x":0.17441860602657874,"y":0.81860465071321153},"bottomRight":{"x":0.33866279342836308,"y":0.81860465071321153},"topLeft":{"y":0.80224260920482571,"x":0.17441860602657874}},"confidence":1},{"quad":{"bottomRight":{"x":0.20494965499981327,"y":0.8813515451229893},"topLeft":{"y":0.86748566399153815,"x":0.17441081072672138},"topRight":{"y":0.86739807955335024,"x":0.20493404290810777},"bottomLeft":{"y":0.8814391295611772,"x":0.17442642281842688}},"text":"Jamie","confidence":1},{"quad":{"bottomRight":{"y":0.87841200692636912,"x":0.3445576346122215},"topRight":{"x":0.344388168325229,"y":0.86446115351054065},"bottomLeft":{"y":0.87972489273575127,"x":0.30241415830691615},"topLeft":{"y":0.86577403931992281,"x":0.30224469201992366}},"confidence":1,"text":"3 days ago"},{"text":"Deal! I'll cook for you, bring the wine?","confidence":1,"quad":{"topLeft":{"y":0.88837209333263822,"x":0.17587209651064048},"topRight":{"x":0.33575581540796406,"y":0.88837209333263822},"bottomRight":{"x":0.33575581540796406,"y":0.90697674325650912},"bottomLeft":{"y":0.90697674325650912,"x":0.17587209651064048}}},{"confidence":1,"text":"Parker","quad":{"topRight":{"y":0.9581395355755481,"x":0.20784883672112531},"bottomLeft":{"y":0.97441860450197137,"x":0.17441860489709179},"topLeft":{"x":0.17441860489709179,"y":0.9581395355755481},"bottomRight":{"x":0.20784883672112531,"y":0.97441860450197137}}},{"confidence":1,"quad":{"bottomRight":{"y":0.96994379386387741,"x":0.34445371874896175},"topRight":{"x":0.34449926929384134,"y":0.95599049598926344},"bottomLeft":{"y":0.96959089839743939,"x":0.3023030549809535},"topLeft":{"x":0.30234860552583309,"y":0.95563760052282543}},"text":"4 days ago"},{"text":"Yes! Sunday brunch? I know the perfec...","confidence":1,"quad":{"bottomRight":{"x":0.34302325543684503,"y":0.99767441832495285},"topLeft":{"x":0.17441860924338745,"y":0.98369011193895217},"topRight":{"y":0.98369011193895217,"x":0.34302325543684503},"bottomLeft":{"x":0.17441860924338745,"y":0.99767441832495285}}},{"confidence":0.5,"text":"localhost","quad":{"bottomLeft":{"y":0.03023255823320592,"x":0.44912790744805831},"topRight":{"y":0.018604651301677766,"x":0.48691860292015882},"topLeft":{"x":0.44912790744805831,"y":0.018604651301677766},"bottomRight":{"y":0.03023255823320592,"x":0.48691860292015882}}},{"text":"Open in ImagineAPI 80","confidence":0.5,"quad":{"bottomLeft":{"y":0.032619775824936137,"x":0.87354651526897897},"topLeft":{"x":0.87354651526897897,"y":0.016279069984462713},"topRight":{"y":0.016279069984462713,"x":0.9912790677615444},"bottomRight":{"x":0.9912790677615444,"y":0.032619775824936137}}},{"quad":{"topLeft":{"x":0.41285609413536228,"y":0.14382609962978032},"bottomRight":{"y":0.16315064436724325,"x":0.45342297621481881},"topRight":{"y":0.14454713185310752,"x":0.45355150188866866},"bottomLeft":{"x":0.41272756846151243,"y":0.16242961214391605}},"text":"Jordan","confidence":1},{"quad":{"bottomRight":{"x":0.45787450008628572,"y":0.18121731873766866},"bottomLeft":{"x":0.41427032253482193,"y":0.18157316709476534},"topRight":{"x":0.45782269936269082,"y":0.16493846028065362},"topLeft":{"y":0.1652943086377503,"x":0.41421852181122704}},"text":"Active now","confidence":1},{"confidence":1,"quad":{"topLeft":{"y":0.24651162818213723,"x":0.38517442404048707},"bottomRight":{"y":0.26299694157433307,"x":0.60319767443334993},"bottomLeft":{"x":0.38517442404048707,"y":0.26299694157433307},"topRight":{"y":0.24651162818213723,"x":0.60319767443334993}},"text":"Hey! I loved your profile pic from the hiking trail ®"},{"text":"2:30 PM","confidence":1,"quad":{"topLeft":{"x":0.60615506119417739,"y":0.29269325382157707},"bottomRight":{"y":0.30498116413912535,"x":0.63657749770984462},"bottomLeft":{"x":0.6060568636990975,"y":0.30432009965675832},"topRight":{"x":0.63667569520492451,"y":0.29335431830394421}}},{"quad":{"bottomRight":{"y":0.38121334487797165,"x":0.63665454241871733},"topLeft":{"x":0.60607801495856928,"y":0.36994944551713604},"bottomLeft":{"y":0.38157703115471764,"x":0.60613203748229016},"topRight":{"y":0.36958575924039005,"x":0.63660051989499633}},"text":"2:35 PM","confidence":1},{"text":"Thank you! That was from last weekend at Mt. Wilson","quad":{"topRight":{"y":0.32093023348767691,"x":0.85755813544220805},"topLeft":{"y":0.32093023348767691,"x":0.62354651024577656},"bottomLeft":{"x":0.62354651024577656,"y":0.33953488341154792},"bottomRight":{"x":0.85755813544220805,"y":0.33953488341154792}},"confidence":1},{"text":"Nice! I love hiking too. We should go sometime!","quad":{"topRight":{"y":0.39534883751868466,"x":0.59302325519393873},"topLeft":{"y":0.39534883751868466,"x":0.3851744215986968},"bottomRight":{"y":0.41395348744255567,"x":0.59302325519393873},"bottomLeft":{"y":0.41395348744255567,"x":0.3851744215986968}},"confidence":1},{"text":"2:40 PM","quad":{"bottomLeft":{"x":0.60605552467596979,"y":0.45547330740838399},"topRight":{"y":0.44452669238175258,"x":0.63667703448293245},"bottomRight":{"y":0.45615347551357655,"x":0.6365759996398227},"topLeft":{"y":0.44384652427656002,"x":0.60615655951907954}},"confidence":1},{"confidence":1,"quad":{"topLeft":{"x":0.38808139641242489,"y":0.94883720945151706},"topRight":{"y":0.94883720945151706,"x":0.46947674050617988},"bottomRight":{"y":0.96534148842193801,"x":0.46947674050617988},"bottomLeft":{"x":0.38808139641242489,"y":0.96534148842193801}},"text":"Type a message..."}],"text":"• ImagineAPI\nTinder\nDEMO APP\nMessages\n10 matches\nJordan\n5m\nThat sounds amazing! When are you...\nRiley\nHaha yes! Best pizza in town for sure\n1h\n3h\nCasey\nI'd love that! How about Friday evening?\nAvery\nAbsolutely! I know a great trail\n5h\nQuinn\nYesterday\nI'm reading 'The Midnight Library' right...\nMorgan\nYesterday\nThat would be awesome! Next Friday?\nSage\n2 days ago\nI'd love to! Sunday morning works for ...\nJamie\n3 days ago\nDeal! I'll cook for you, bring the wine?\nParker\n4 days ago\nYes! Sunday brunch? I know the perfec...\nlocalhost\nOpen in ImagineAPI 80\nJordan\nActive now\nHey! I loved your profile pic from the hiking trail ®\n2:30 PM\n2:35 PM\nThank you! That was from last weekend at Mt. Wilson\nNice! I love hiking too. We should go sometime!\n2:40 PM\nType a message...","latencyMs":967.35291700000005,"texts":"• ImagineAPI\nTinder\nDEMO APP\nMessages\n10 matches\nJordan\n5m\nThat sounds amazing! When are you...\nRiley\nHaha yes! Best pizza in town for sure\n1h\n3h\nCasey\nI'd love that! How about Friday evening?\nAvery\nAbsolutely! I know a great trail\n5h\nQuinn\nYesterday\nI'm reading 'The Midnight Library' right...\nMorgan\nYesterday\nThat would be awesome! Next Friday?\nSage\n2 days ago\nI'd love to! Sunday morning works for ...\nJamie\n3 days ago\nDeal! I'll cook for you, bring the wine?\nParker\n4 days ago\nYes! Sunday brunch? I know the perfec...\nlocalhost\nOpen in ImagineAPI 80\nJordan\nActive now\nHey! I loved your profile pic from the hiking trail ®\n2:30 PM\n2:35 PM\nThank you! That was from last weekend at Mt. Wilson\nNice! I love hiking too. We should go sometime!\n2:40 PM\nType a message..."}
    """
  end

  defp linkedin_recruiter_context do
    ~S"""
    text: "in\nDEMO APP\nMessaging\nMJ\nAC\nMW\nPF\nTB\nSM\nMilly Jackson\nVP of Sales at StreamTech\nYou: Just circling back on this - w...\nAmanda Chen\nEnterprise AE at SalesForce\nFollowing up on our call - sent ove...\nMarcus Williams\nSDR at HubSpot\nI noticed you downloaded our Stat...\nPeter File\nSenior Recruiter at TechTalent\nSolutions\nThanks for connecting! Love what...\nTyler Brooks\nBDR at Outreach.io\nQuick question - what's your curre...\nSophia Martinez\nAccount Executive at Gong.io\nYour demo with our team was gre...\n40\n3h\n5h\n1d\n1d\n2d\nLinkedin Messaging\nPeter File\nSenior Recruiter at TechTalent Solutions\nPF\nHi! I came across your profile and I'm impressed with your background.\nWe have an exciting Senior Developer role that I think would be a great\nfit. Would you be open to a quick chat this week?\nYesterday 2:00 PM\nWrite a message...\nSend"
    latencyMs: 479.53
    observations[44]{text,confidence,x,y,width,height}:
      "in",0.00,0.0000,0.0000,0.0000,0.0000
      "DEMO APP",0.00,0.0000,0.0000,0.0000,0.0000
      "Messaging",0.00,0.0000,0.0000,0.0000,0.0000
      "MJ",0.00,0.0000,0.0000,0.0000,0.0000
      "AC",0.00,0.0000,0.0000,0.0000,0.0000
      "MW",0.00,0.0000,0.0000,0.0000,0.0000
      "PF",0.00,0.0000,0.0000,0.0000,0.0000
      "TB",0.00,0.0000,0.0000,0.0000,0.0000
      "SM",0.00,0.0000,0.0000,0.0000,0.0000
      "Milly Jackson",0.00,0.0000,0.0000,0.0000,0.0000
      "VP of Sales at StreamTech",0.00,0.0000,0.0000,0.0000,0.0000
      "You: Just circling back on this - w...",0.00,0.0000,0.0000,0.0000,0.0000
      "Amanda Chen",0.00,0.0000,0.0000,0.0000,0.0000
      "Enterprise AE at SalesForce",0.00,0.0000,0.0000,0.0000,0.0000
      "Following up on our call - sent ove...",0.00,0.0000,0.0000,0.0000,0.0000
      "Marcus Williams",0.00,0.0000,0.0000,0.0000,0.0000
      "SDR at HubSpot",0.00,0.0000,0.0000,0.0000,0.0000
      "I noticed you downloaded our Stat...",0.00,0.0000,0.0000,0.0000,0.0000
      "Peter File",0.00,0.0000,0.0000,0.0000,0.0000
      "Senior Recruiter at TechTalent",0.00,0.0000,0.0000,0.0000,0.0000
      "Solutions",0.00,0.0000,0.0000,0.0000,0.0000
      "Thanks for connecting! Love what...",0.00,0.0000,0.0000,0.0000,0.0000
      "Tyler Brooks",0.00,0.0000,0.0000,0.0000,0.0000
      "BDR at Outreach.io",0.00,0.0000,0.0000,0.0000,0.0000
      "Quick question - what's your curre...",0.00,0.0000,0.0000,0.0000,0.0000
      "Sophia Martinez",0.00,0.0000,0.0000,0.0000,0.0000
      "Account Executive at Gong.io",0.00,0.0000,0.0000,0.0000,0.0000
      "Your demo with our team was gre...",0.00,0.0000,0.0000,0.0000,0.0000
      "40",0.00,0.0000,0.0000,0.0000,0.0000
      "3h",0.00,0.0000,0.0000,0.0000,0.0000
      "5h",0.00,0.0000,0.0000,0.0000,0.0000
      "1d",0.00,0.0000,0.0000,0.0000,0.0000
      "1d",0.00,0.0000,0.0000,0.0000,0.0000
      "2d",0.00,0.0000,0.0000,0.0000,0.0000
      "Linkedin Messaging",0.00,0.0000,0.0000,0.0000,0.0000
      "Peter File",0.00,0.0000,0.0000,0.0000,0.0000
      "Senior Recruiter at TechTalent Solutions",0.00,0.0000,0.0000,0.0000,0.0000
      "PF",0.00,0.0000,0.0000,0.0000,0.0000
      "Hi! I came across your profile and I'm impressed with your background.",0.00,0.0000,0.0000,0.0000,0.0000
      "We have an exciting Senior Developer role that I think would be a great",0.00,0.0000,0.0000,0.0000,0.0000
      "fit. Would you be open to a quick chat this week?",0.00,0.0000,0.0000,0.0000,0.0000
      "Yesterday 2:00 PM",0.00,0.0000,0.0000,0.0000,0.0000
      "Write a message...",0.00,0.0000,0.0000,0.0000,0.0000
      "Send",0.00,0.0000,0.0000,0.0000,0.0000
    """
  end

  defp article_summary_context do
    """
    The Science of Better Sleep: What Research Actually Shows
    By Dr. Emily Roberts · 8 min read
    Health · Jan 6, 2025

    Sleep quality matters more than quantity, according to the latest research from Stanford's Sleep Medicine Center. Adults who get 6 hours of deep sleep often feel more rested than those getting 8 hours of fragmented sleep.

    The 90-Minute Rule
    Our sleep cycles last approximately 90 minutes. Waking up mid-cycle leaves you groggy, while waking at the end of a cycle feels refreshing. Try sleeping in multiples of 90 minutes: 6, 7.5, or 9 hours.

    Temperature Matters
    Your body temperature naturally drops at night. Keeping your bedroom between 65-68°F (18-20°C) helps facilitate this process and promotes deeper sleep.

    The Blue Light Problem
    Screens emit blue light that suppresses melatonin production. The research suggests stopping screen use 1-2 hours before bed, or using blue light filters.

    Caffeine's Half-Life
    Caffeine has a half-life of 5-6 hours. That 3pm coffee still has half its caffeine in your system at 9pm. Consider a 2pm cutoff for better sleep.

    Key Takeaways:
    - Quality over quantity: deep sleep matters most
    - Sleep in 90-minute cycles
    - Keep bedroom cool (65-68°F)
    - Avoid screens before bed
    - No caffeine after 2pm
    """
  end

  defp logo_feedback_context do
    """
    text: "\" ImagineAPI\nlocalhost\nOpen in ImagineAPI\n480\nFigma - Brand Logo Design\nDEMO APP\nFast Maids"
    latencyMs: 1032.46
    observations[7]{text,confidence,x,y,width,height}:
      "\" ImagineAPI",0.00,0.0000,0.0000,0.0000,0.0000
      "localhost",0.00,0.0000,0.0000,0.0000,0.0000
      "Open in ImagineAPI",0.00,0.0000,0.0000,0.0000,0.0000
      "480",0.00,0.0000,0.0000,0.0000,0.0000
      "Figma - Brand Logo Design",0.00,0.0000,0.0000,0.0000,0.0000
      "DEMO APP",0.00,0.0000,0.0000,0.0000,0.0000
      "Fast Maids",0.00,0.0000,0.0000,0.0000,0.0000
    """
  end

  defp logo_feedback_image do
    image_path = Path.join(:code.priv_dir(:tqf_api), "scenarios/logo_feedback.png")

    case File.read(image_path) do
      {:ok, data} -> Base.encode64(data)
      {:error, _} -> nil
    end
  end
end
